;function BaconObj(){}var $,bacon=$=function(a,b){if(a instanceof BaconObj){console.log("debug: BaconObj passed to BaconObj.");return a}var c=new BaconObj();if(typeof a==="object"){c.elements=(a instanceof Array)?a:[a];c.length=c.elements.length}else{c.selector=a;c.elements=[document];c.select(a,b)}return c};BaconObj.prototype=bacon.html={};bacon._escape=function(a){return a.replace(/&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};bacon._getElementText=function(c){var d=c.childNodes,a="",b;for(b=0;b<d.length;b++){a+=(d[b] instanceof Text)?d[b].nodeValue:bacon._getElementText(d[b])}return a};bacon._toBaconObj=function(a){if(typeof a==="object"){return(a instanceof BaconObj)?a:$(a.cloneNode(true))}return(typeof a==="string")?$(document.createElement("div")).html(a).children():false};bacon.html.select=function(a,b){var e,f=[],d,c;for(d=0;d<this.elements.length&&(typeof b==="undefined"||f.length<b);d++){e=this.elements[d].querySelectorAll(a);for(c=0;c<e.length&&(typeof b==="undefined"||f.length<b);c++){f.push(e[c])}}this.elements=f;this.length=f.length;this.selector=a;return this};bacon.html.each=function(b){for(var a=0;a<this.elements.length;a++){b.call(this.elements[a])}return this};bacon.html.html=function(a){return(typeof a!=="undefined")?this.each(function(){this.innerHTML=a}):this.elements[0].innerHTML};bacon.html.text=function(a){if(typeof a!=="undefined"){a=bacon._escape(bacon._escape(a));return this.each(function(){this.innerHTML=a})}return bacon._getElementText(this.elements[0])};bacon.html.val=bacon.html.value=function(a){return(typeof a!=="undefined")?this.each(function(){this.value=a}):this.elements[0].value};bacon.html.next=function(a){var b=this.elements[0].nextSibling;while(b&&b.nodeType!==1||(typeof a!=="undefined"&&!$(b).matches(a))){b=b.nextSibling}return $(b)};bacon.html.previous=function(a){var b=this.elements[0].previousSibling;while(b&&b.nodeType!==1||(typeof a!=="undefined"&&!$(b).matches(a))){b=b.previousSibling}return $(b)};bacon.html.children=function(b){var d=this.elements[0].childNodes,a=[],c;for(c=0;c<d.length;c++){if(d[c].nodeType===1&&(typeof b==="undefined"||$(d[c]).matches(b))){a.push(d[c])}}return $(a)};bacon.html.parent=function(a){var b=this.elements[0].parentNode;while(typeof a!=="undefined"&&!$(b).matches(a)){b=b.parentNode}return $(b)};bacon.html.siblings=function(a){var c=this.parent().children(a);for(var b=0;b<c.length;b++){if(c.elements[b]===this.elements[0]){c.elements.splice(b,1);c.length--;break}}return c};bacon.html.get=function(a){return $(this.elements[a])};bacon.html.append=function(a){a=bacon._toBaconObj(a);return this.each(function(){for(var b=0;b<a.elements.length;b++){this.appendChild(a.elements[b].cloneNode(true))}})};bacon.html.appendTo=function(a,b){$(a,b).append(this);return this};bacon.html.prepend=function(a){a=bacon._toBaconObj(a);return this.each(function(){for(var b=0;b<a.elements.length;b++){this.insertBefore(a.elements[b].cloneNode(true),this.childNodes[0])}})};bacon.html.prependTo=function(a,b){$(a,b).prepend(this);return this};bacon.html.insertBefore=function(a){a=bacon._toBaconObj(a);return this.each(function(){var b=this;a.each(function(){b.parentNode.insertBefore(this.cloneNode(true),b)})})};bacon.html.moveTo=function(a,b){var c=((typeof a==="string")?$(a,1):a).elements[0];if(typeof b==="undefined"||!b){c.appendChild(this.elements[0])}else{c.insertBefore(this.elements[0],c.childNodes[0])}return this};bacon.html.copyTo=function(a,b){var c=(typeof a==="string")?$(a,1):a;c[(typeof b==="undefined"||!b)?"append":"prepend"](this);return this};bacon.html.matches=function(a){if(this.elements[0].matchesSelector){return this.elements[0].matchesSelector(a)}else{if(this.elements[0].webkitMatchesSelector){return this.elements[0].webkitMatchesSelector(a)}else{if(this.elements[0].mozMatchesSelector){return this.elements[0].mozMatchesSelector(a)}}}var b=this.elements[0].parentNode.querySelectorAll(a);return b.indexOf(this.elements[0])!==-1};bacon.html.css=function(a,b){return(typeof b!=="undefined")?this.each(function(){this.style[a]=b}):this.elements[0].style[a]};bacon._documentEvents={};bacon._eventData=[];bacon.html.on=function(b,c,a){return this.each(function(){var e=this,d=function(f){if(c.call(e,f)===false){f.stopPropagation();f.preventDefault()}if(d.one){bacon.html.removeHandlers.call($(e),b,c)}};d.one=(typeof a!=="undefined");d.callback=c;if(this.addEventListener){this.addEventListener(b,d)}else{this.attachEvent("on"+b,d)}if(!$(this).data("baconId")){$(this).data("baconId",bacon._eventData.push([[b,d]])-1)}else{bacon._eventData[$(this).data("baconId")].push([b,d])}})};bacon.html.one=function(a,b){return bacon.html.on.call(this,a,b,true)};bacon.html.live=function(a,b){if(!bacon._documentEvents[a]){bacon._documentEvents[a]=[];$(document).on(a,function(f){for(var d=0,c;d<bacon._documentEvents[a].length;d++){c=(f.target)?f.target:f.srcElement;if($(c).matches(bacon._documentEvents[a][d][0])){bacon._documentEvents[a][d][1].call(c,f)}}})}bacon._documentEvents[a].push([this.selector,b]);return this};bacon.html.unlive=function(c,e){if(typeof c==="undefined"&&typeof e==="undefined"){var b,d;for(d in bacon._documentEvents){for(b=0;b<bacon._documentEvents[d].length;b++){if(bacon._documentEvents[d][b][0]===this.selector){bacon._documentEvents[d].splice(b,1)}}}}else{if(bacon._documentEvents[c]){for(var a=bacon._documentEvents[c],b=0;b<a.length;b++){if(a[b][0]===this.selector&&(typeof e==="undefined"||a[b][1]===e)){a.splice(b,1)}}}}return this};bacon.html.removeHandlers=bacon.html.off=function(a,b){return this.each(function(){if($(this).data("baconId")){var d=bacon._eventData[$(this).data("baconId")],c;for(c=0;c<d.length;c++){if(d[c][0]===a&&(typeof b==="undefined"||d[c][1].callback===b)){if(this.removeEventListener){this.removeEventListener(d[c][0],d[c][1])}else{this.detachEvent("on"+d[c][0],d[c][1])}}}}})};bacon.html.trigger=function(a,b){return this.each(function(){if(this.dispatchEvent){var e,d=document.createEvent("UIEvents");d.initUIEvent(a,true,true,window,1);e=!this.dispatchEvent(d);if(typeof b==="function"){b.call(this,e)}}else{if(document.createEventObject){var c=document.createEventObject();c.button=1;this.fireEvent("on"+a,c)}}})};bacon.req=function(e,a,c,d){if(typeof e==="object"){a=e.url;c=e.data;d=e.callback;error=e.error;e=e.method}else{if(typeof c==="function"){d=c}}if(typeof c==="object"){c=bacon.querystring(c)}var b=(window.XMLHttpRequest)?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");if(e==="GET"&&typeof c==="string"){a+="?"+c;delete c}b.open(e,a,true);if(e==="POST"&&typeof c==="string"){b.setRequestHeader("Content-type","application/x-www-form-urlencoded")}b.onreadystatechange=function(){if(b.readyState===4&&b.status===200){b.body=b.responseText;if(b.getResponseHeader("Content-type")==="application/json"){d(JSON.parse(b.responseText),b)}else{d(b.responseText,b)}}else{if(b.readyState===4&&typeof error==="function"){b.body=b.responseText;error(b.status,b)}else{if(b.readyState===4){throw new Error("XHR Request failed: "+b.status)}}}};b.send((typeof c==="string")?c:null);return this};bacon.get=function(a,b,c){a.method="GET";return(typeof a==="object")?bacon.req(a):bacon.req("GET",a,b,c)};bacon.post=function(a,b,c){a.method="POST";return(typeof a==="object")?bacon.req(a):bacon.req("POST",a,b,c)};bacon.html.data=function(a,b){if(typeof b==="undefined"){return(this.elements[0].dataset)?this.elements[0].dataset[a]:null}return this.each(function(){if(!this.dataset){this.dataset={}}this.dataset[a]=b})};bacon.html.serialise=function(b){if(this.elements[0].tagName!=="FORM"){throw new Error("You can only serialise forms.")}if(typeof b!=="boolean"){b=false}var d=this.elements[0].elements,c,a=[],e={};for(c=0;c<d.length;c++){if(b){e[d[c].name]=d[c].value}else{a.push(d[c].name+"="+d[c].value)}}return(b)?e:a.join("&")};bacon.querystring=bacon.qs=function(e){if(typeof e==="object"){var c=[],d,b;for(d in e){if(typeof e[d]==="string"){c.push(d+"="+e[d])}else{if(e[d] instanceof Array){for(b=0;b<e[d].length;b++){c.push(d+"[]="+e[d][b])}}else{if(typeof e[d]==="object"){for(b in e[d]){c.push(d+"["+b+"]="+e[d][b])}}}}}return c.join("&")}else{if(typeof e==="string"){e=e.split("&");for(var a,f={},d=0;d<e.length;d++){if(a=/^([^\[\]]+)\[([^\[\]]+)\]=(.+)$/.exec(e[d])){if(typeof f[a[1]]==="undefined"){f[a[1]]={}}f[a[1]][a[2]]=a[3]}else{if(a=/^([^\[\]]+)\[\]=(.+)$/.exec(e[d])){if(typeof f[a[1]]==="undefined"){f[a[1]]=[]}f[a[1]].push(a[2])}else{if(a=/^([^=]+)=(.+)$/.exec(e[d])){f[a[1]]=a[2]}}}}return f}}};bacon.enableArrayFeatures=function(){Array.prototype.compact=function(){for(var a=[],b=0;b<this.length;b++){if(this[b]){a.push(this[b])}}return a};Array.prototype.flatten=function(){for(var a=[],d,c=0,b;c<this.length;c++){if(this[c] instanceof Array){a=a.concat(this[c].flatten())}else{a.push(this[c])}}return a};Array.prototype.groupBy=function(e){for(var b,d={},c=0;c<this.length;c++){b=e(this[c]);if(!d[b]){d[b]=[]}d[b].push(this[c])}return d};Array.prototype.included=function(a){return this.indexOf(a)!==-1};Array.prototype.max=function(c){if(typeof c==="undefined"){c=typeof this[0]}for(var b=0,a=null;b<this.length;b++){if(typeof this[b]===c&&(a===null||this[b]>a)){a=this[b]}}return a};Array.prototype.min=function(c){if(typeof c==="undefined"){c=typeof this[0]}for(var b=0,a=null;b<this.length;b++){if(typeof this[b]===c&&(a===null||this[b]<a)){a=this[b]}}return a};Array.prototype.rand=Array.prototype.random=function(b){if(typeof b!=="number"){return this[Math.floor(Math.random()*this.length)]}if(b>this.length){throw new Error("Cannot return more items than the array contains.")}var a=[],c=this.slice();while(a.length<b){a=a.concat(c.splice(Math.floor(Math.random()*c.length),1))}return a};Array.prototype.range=function(){for(var c=0,b=null,a=null;c<this.length;c++){if(typeof this[c]==="number"){if(b===null||this[c]<b){b=this[c]}else{if(a===null||this[c]>a){a=this[c]}}}}return a-b};Array.prototype.shuffle=function(){var a=[],b=this.slice();while(b.length){a=a.concat(b.splice(Math.floor(Math.random()*b.length),1))}return a};Array.prototype.unique=function(){for(var a=0,b=this.slice();a<b.length;a++){if(b.indexOf(b[a])<a){b.splice(a--,1)}}return b};Array.prototype.without=function(b,d){if(typeof d==="undefined"||!d){b=[b]}for(var c=this.slice(),a=0;a<b.length;a++){while(c.indexOf(b[a])!==-1){c.splice(c.indexOf(b[a]),1)}}return c};return true};if(typeof JSON==="undefined"){JSON={};JSON.parse=function(text){return eval("("+text+")")};JSON.stringify=function(b){var a=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function d(h){if(h.toJSON){return'"'+h.toJSON()+'"'}if(typeof h==="string"){return'"'+h.replace(e,function(i){var j=c[i];return typeof j==="string"?j:"\\u"+("0000"+i.charCodeAt(0).toString(16)).slice(-4)})+'"'}if(typeof h==="number"){return isFinite(obj)?String(h):"null"}if(typeof h==="boolean"){return h}if(typeof h==="object"&&!h){return"null"}var g,f=[];if(h instanceof Array){for(g=0;g<h.length;g++){f.push(d(h[g])||"null")}return"["+f.join(",")+"]"}if(typeof h==="object"){for(g in h){f.push(d(g)+":"+d(h[g]))}return"{"+f.join(",")+"}"}throw new TypeError("No JSON representation for this object")}return d(b)};if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(a){function b(c){return c<10?"0"+c:c}return isFinite(this)?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null}}}if(!Array.prototype.forEach){Array.prototype.forEach=function(b){for(var a=0;a<this.length;a++){b.call(null,this[a],a,this)}}}bacon.defaultAnimTime=400;bacon.html.fadeIn=function(c,a){if(typeof c!=="number"){a=c;c=bacon._defaultAnimTime}var b=Date.now(),d=this;setTimeout(function(){a.call(d)},c+4);return this.each(function(){var e,g=(this.style.opacity)?this.style.opacity:"0",f=this;if(g!=="1"){e=setInterval(function(){f.style.opacity=((Date.now()-b)*(1-g)/c);if(f.style.opacity>=1&&(f.style.opacity=1)){clearInterval(e)}},4)}})};bacon.html.fadeOut=function(c,a){if(typeof c!=="number"){a=c;c=bacon._defaultAnimTime}var b=Date.now(),d=this;setTimeout(function(){a.call(d)},c+4);return this.each(function(){var e,g=((this.style.opacity)?this.style.opacity:1),f=this;if(this.style.opacity!=="0"){e=setInterval(function(){f.style.opacity=1-((Date.now()-b)*g/c);if(f.style.opacity<=0&&!(f.style.opacity=0)){clearInterval(e)}},4)}})};