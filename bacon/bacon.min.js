;function BaconObj(){this.elements=[];this.length=0;this.selector=""}var $,bacon=$=function(a,b){if(a instanceof BaconObj){console.log("debug: BaconObj passed to BaconObj.");return a}var c=new BaconObj();if(typeof a==="object"&&a!==null){c.elements=(a instanceof Array)?a:[a];c.length=c.elements.length}else{if(typeof a!==null){c.selector=a;c.elements=[document];c.select(a,b)}}return c};BaconObj.prototype=bacon.html={};bacon._escape=function(a){return a.replace(/&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};bacon._getElementText=function(d){var e=d.childNodes,b="",c=0,a=e.length;for(;c<a;c+=1){b+=(e[c] instanceof Text)?e[c].nodeValue:bacon._getElementText(e[c])}return b};bacon._toBaconObj=function(a){if(typeof a==="object"){return(a instanceof BaconObj)?a:$(a.cloneNode(true))}return(typeof a==="string")?$(document.createElement("div")).html(a).children():false};bacon.html.select=function(b,d){var g,h=[],f=0,e,c=this.elements.length,a;for(;f<c&&(typeof d==="undefined"||h.length<d);f+=1){g=this.elements[f].querySelectorAll(b);a=g.length;for(e=0;e<a&&(typeof d==="undefined"||h.length<d);e+=1){h.push(g[e])}}this.elements=h;this.length=h.length;this.selector=b;return this};bacon.html.each=function(c){for(var b=0,a=this.elements.length;b<a;b+=1){c.call(this.elements[b])}return this};bacon.html.html=function(a){return(typeof a!=="undefined")?this.each(function(){this.innerHTML=a}):this.elements[0].innerHTML};bacon.html.text=function(a){if(typeof a!=="undefined"){a=bacon._escape(bacon._escape(a));return this.each(function(){this.innerHTML=a})}return bacon._getElementText(this.elements[0])};bacon.html.val=bacon.html.value=function(a){return(typeof a!=="undefined")?this.each(function(){this.value=a}):this.elements[0].value};bacon.html.next=function(a){var b=this.elements[0].nextSibling;while(b&&(b.nodeType!==1||(typeof a!=="undefined"&&!$(b).matches(a)))){b=b.nextSibling}return $(b)};bacon.html.previous=function(a){var b=this.elements[0].previousSibling;while(b&&(b.nodeType!==1||(typeof a!=="undefined"&&!$(b).matches(a)))){b=b.previousSibling}return $(b)};bacon.html.children=function(b){var d=this.elements[0].childNodes,a=[],c;for(c=0;c<d.length;c+=1){if(d[c].nodeType===1&&(typeof b==="undefined"||$(d[c]).matches(b))){a.push(d[c])}}return $(a)};bacon.html.parent=function(a){var b=this.elements[0].parentNode;while(typeof a!=="undefined"&&!$(b).matches(a)){b=b.parentNode}return $(b)};bacon.html.siblings=function(a){var b=0,c=this.parent().children(a);for(;b<c.length;b+=1){if(c.elements[b]===this.elements[0]){c.elements.splice(b,1);c.length-=1;break}}return c};bacon.html.get=function(a){return $(this.elements[a])};bacon.html.append=function(a){a=bacon._toBaconObj(a);return this.each(function(){var b=a.elements.length;while(b--){this.appendChild(a.elements[b].cloneNode(true))}})};bacon.html.appendTo=function(a,b){$(a,b).append(this);return this};bacon.html.prepend=function(a){a=bacon._toBaconObj(a);return this.each(function(){var b=a.elements.length;while(b--){this.insertBefore(a.elements[b].cloneNode(true),this.childNodes[0])}})};bacon.html.prependTo=function(a,b){$(a,b).prepend(this);return this};bacon.html.insertBefore=function(a){a=bacon._toBaconObj(a);return this.each(function(){var b=this;a.each(function(){b.parentNode.insertBefore(this.cloneNode(true),b)})})};bacon.html.moveTo=function(a,b){var c=((typeof a==="string")?$(a,1):a).elements[0];if(typeof b==="undefined"||!b){c.appendChild(this.elements[0])}else{c.insertBefore(this.elements[0],c.childNodes[0])}return this};bacon.html.copyTo=function(a,b){var c=(typeof a==="string")?$(a,1):a;c[(typeof b==="undefined"||!b)?"append":"prepend"](this);return this};bacon.html.matches=(function(){if(HTMLElement.prototype.matchesSelector){return function(a){return this.elements[0].matchesSelector(a)}}else{if(HTMLElement.prototype.webkitMatchesSelector){return function(a){return this.elements[0].webkitMatchesSelector(a)}}else{if(HTMLElement.prototype.mozMatchesSelector){return function(a){return this.elements[0].mozMatchesSelector(a)}}}}return function(a){var b=this.elements[0].parentNode.querySelectorAll(a);return b.indexOf(this.elements[0])!==-1}})();bacon.html.css=function(a,b){return(typeof b!=="undefined")?this.each(function(){this.style[a]=b}):this.elements[0].style[a]};bacon._documentEvents={};bacon._eventData=[];bacon.html.on=function(b,c,a){return this.each(function(){var e=this,d=function(f){if(c.call(e,f)===false){f.stopPropagation();f.preventDefault()}if(d.one){bacon.html.removeHandlers.call($(e),b,c)}};d.one=(typeof a!=="undefined");d.callback=c;if(this.addEventListener){this.addEventListener(b,d)}else{this.attachEvent("on"+b,d)}if(!$(this).data("baconId")){$(this).data("baconId",bacon._eventData.push([[b,d]])-1)}else{bacon._eventData[$(this).data("baconId")].push([b,d])}})};bacon.html.one=function(a,b){return bacon.html.on.call(this,a,b,true)};bacon.html.live=function(a,b){if(!bacon._documentEvents[a]){bacon._documentEvents[a]=[];$(document).on(a,function(f){var d=bacon._documentEvents[a].length,c;while(d--){c=(f.target)?f.target:f.srcElement;if($(c).matches(bacon._documentEvents[a][d][0])){bacon._documentEvents[a][d][1].call(c,f)}}})}bacon._documentEvents[a].push([this.selector,b]);return this};bacon.html.unlive=function(c,e){if(typeof c==="undefined"&&typeof e==="undefined"){var b,d;for(d in bacon._documentEvents){b=bacon._documentEvents[d].length;while(b--){if(bacon._documentEvents[d][b][0]===this.selector){bacon._documentEvents[d].splice(b,1)}}}}else{if(bacon._documentEvents[c]){var a=bacon._documentEvents[c],b=a.length;while(b--){if(a[b][0]===this.selector&&(typeof e==="undefined"||a[b][1]===e)){a.splice(b,1)}}}}return this};bacon.html.removeHandlers=bacon.html.off=function(a,b){return this.each(function(){if($(this).data("baconId")){var d=bacon._eventData[$(this).data("baconId")],c=d.length;while(c--){if(d[c][0]===a&&(typeof b==="undefined"||d[c][1].callback===b)){if(this.removeEventListener){this.removeEventListener(d[c][0],d[c][1])}else{this.detachEvent("on"+d[c][0],d[c][1])}}}}})};bacon.html.trigger=function(a,b){return this.each(function(){if(this.dispatchEvent){var e,d=document.createEvent("UIEvents");d.initUIEvent(a,true,true,window,1);e=!this.dispatchEvent(d);if(typeof b==="function"){b.call(this,e)}}else{if(document.createEventObject){var c=document.createEventObject();c.button=1;this.fireEvent("on"+a,c)}}})};bacon.req=function(e,a,c,d){if(typeof e==="object"){a=e.url;c=e.data;d=e.callback;error=e.error;e=e.method}else{if(typeof c==="function"){d=c}}if(typeof c==="object"){c=bacon.querystring(c)}var b=(window.XMLHttpRequest)?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");if(e==="GET"&&typeof c==="string"){a+="?"+c;delete c}b.open(e,a,true);if(e==="POST"&&typeof c==="string"){b.setRequestHeader("Content-type","application/x-www-form-urlencoded")}b.onreadystatechange=function(){if(b.readyState===4&&b.status===200){b.body=b.responseText;if(b.getResponseHeader("Content-type")==="application/json"){d(JSON.parse(b.responseText),b)}else{d(b.responseText,b)}}else{if(b.readyState===4&&typeof error==="function"){b.body=b.responseText;error(b.status,b)}else{if(b.readyState===4){throw new Error("XHR Request failed: "+b.status)}}}};b.send((typeof c==="string")?c:null);return this};bacon.get=function(a,b,c){a.method="GET";return(typeof a==="object")?bacon.req(a):bacon.req("GET",a,b,c)};bacon.post=function(a,b,c){a.method="POST";return(typeof a==="object")?bacon.req(a):bacon.req("POST",a,b,c)};bacon.html.data=function(a,b){if(typeof b==="undefined"){return(this.elements[0].dataset)?this.elements[0].dataset[a]:null}return this.each(function(){if(!this.dataset){this.dataset={}}this.dataset[a]=b})};bacon.html.serialise=function(c){if(this.elements[0].tagName!=="FORM"){throw new Error("You can only serialise forms.")}if(typeof c!=="boolean"){c=false}var e=this.elements[0].elements,d=0,b=[],f={},a=e.length;for(;d<a;d+=1){if(c){f[e[d].name]=e[d].value}else{b.push(e[d].name+"="+e[d].value)}}return(c)?f:b.join("&")};bacon.querystring=bacon.qs=function(f){var d=[],e,c,a;if(typeof f==="object"){for(e in f){if(typeof f[e]==="string"){d.push(e+"="+f[e])}else{if(Array.isArray(f[e])){for(c=0,a=f[e].length;c<a;c+=1){d.push(e+"[]="+f[e][c])}}else{if(typeof f[e]==="object"){for(c in f[e]){d.push(e+"["+c+"]="+f[e][c])}}}}}return d.join("&")}else{if(typeof f==="string"){f=f.split("&");for(var b,g={},e=0,a=f.length;e<a;e+=1){if(b=/^([^\[\]]+)\[([^\[\]]+)\]=(.+)$/.exec(f[e])){if(typeof g[b[1]]==="undefined"){g[b[1]]={}}g[b[1]][b[2]]=b[3]}else{if(b=/^([^\[\]]+)\[\]=(.+)$/.exec(f[e])){if(typeof g[b[1]]==="undefined"){g[b[1]]=[]}g[b[1]].push(b[2])}else{if(b=/^([^=]+)=(.+)$/.exec(f[e])){g[b[1]]=b[2]}}}}return g}}};bacon.curry=function(b){var a=Array.prototype.slice.call(arguments,1);return function(){var c=a.concat(Array.prototype.slice.call(arguments));return b.apply(this,c)}};bacon.enableArrayFeatures=function(){Array.prototype.compact=function(){for(var b=[],c=0,a=this.length;c<a;c+=1){if(this[c]){b.push(this[c])}}return b};Array.prototype.flatten=function(){for(var b=[],e,d=0,c,a=this.length;d<a;d+=1){if(this[d] instanceof Array){b=b.concat(this[d].flatten())}else{b.push(this[d])}}return b};Array.prototype.groupBy=function(f){for(var c,e={},d=0,b=this.length;d<b;d+=1){c=f(this[d]);if(!e[c]){e[c]=[]}e[c].push(this[d])}return e};Array.prototype.included=function(a){return this.indexOf(a)!==-1};Array.prototype.max=function(c){if(typeof c==="undefined"){c=typeof this[0]}for(var b=this.length,a=null;b--;){if(typeof this[b]===c&&(a===null||this[b]>a)){a=this[b]}}return a};Array.prototype.min=function(c){if(typeof c==="undefined"){c=typeof this[0]}var b=this.length,a=null;while(b--){if(typeof this[b]===c&&(a===null||this[b]<a)){a=this[b]}}return a};Array.prototype.rand=Array.prototype.random=function(b){if(typeof b!=="number"){return this[Math.floor(Math.random()*this.length)]}if(b>this.length){throw new Error("Cannot return more items than the array contains.")}var a=[],c=this.slice();while(a.length<b){a=a.concat(c.splice(Math.floor(Math.random()*c.length),1))}return a};Array.prototype.range=function(){var c=this.length,b=null,a=null;while(c--){if(typeof this[c]==="number"){if(b===null||this[c]<b){b=this[c]}if(a===null||this[c]>a){a=this[c]}}}return a-b};Array.prototype.shuffle=function(){var a=[],b=this.slice();while(b.length){a=a.concat(b.splice(Math.floor(Math.random()*b.length),1))}return a};Array.prototype.unique=function(){for(var a=0,b=this.slice();a<b.length;a+=1){if(b.indexOf(b[a])<a){b.splice(a--,1)}}return b};Array.prototype.without=function(b,d){if(typeof d==="undefined"||!d){b=[b]}for(var c=this.slice(),a=b.length;a--;){while(c.indexOf(b[a])!==-1){c.splice(c.indexOf(b[a]),1)}}return c};return true};bacon.JSON={};bacon.JSON.parse=function(b){var a=function(e){var d,f,c;e=e.trim();if(!isNaN(Number(e))){return Number(e)}if(f=/^"([^"]+)"$/.exec(e)){return f[1]}if(e==="true"||e==="false"){return(e==="true")}if(f=/^\[(.+)\]$/.exec(e)){f=f[1].split(",");c=[];for(d=0;d<f.length;d++){c.push(a(f[d]))}return c}if(f=/^{(.+)}$/.exec(e)){f=f[1].split(",");c={};for(d=0;d<f.length;d++){f[d]=f[d].split(":");c[a(f[d][0])]=a(f[d][1])}return c}};return a(b)};bacon.JSON.stringify=function(b){var a=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};var d=function(j){if(j.toJSON){return'"'+j.toJSON()+'"'}if(typeof j==="string"){return'"'+j.replace(e,function(i){var k=c[i];return typeof k==="string"?k:"\\u"+("0000"+i.charCodeAt(0).toString(16)).slice(-4)})+'"'}if(typeof j==="number"){return isFinite(j)?String(j):"null"}if(typeof j==="boolean"){return j.toString()}if(typeof j==="object"&&!j){return"null"}var h,f,g=[];if(j instanceof Array){for(h=0,f=j.length;h<f;h+=1){g.push(d(j[h])||"null")}return"["+g.join(",")+"]"}if(typeof j==="object"){for(h in j){g.push(d(h)+":"+d(j[h]))}return"{"+g.join(",")+"}"}throw new TypeError("No JSON representation for this object")};return d(b)};if(typeof JSON==="undefined"){window.JSON=bacon.JSON}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(a){function b(c){return c<10?"0"+c:c}return isFinite(this)?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null}}if(!Array.prototype.forEach){Array.prototype.forEach=function(c){for(var b=0,a=this.length;b<a;b+=1){c.call(null,this[b],b,this)}}}if(!Array.prototype.isArray){Array.prototype.isArray=function(a){return(typeof a==="object"&&a instanceof Array)}}bacon._defaultAnimTime=400;bacon.html.fadeIn=function(c,a){if(typeof c!=="number"){a=c;c=bacon._defaultAnimTime}var b=Date.now(),d=this;if(typeof a==="function"){setTimeout(function(){a.call(d)},c+4)}return this.each(function(){var e,g=(this.style.opacity||"0"),f=this;if(g!=="1"){e=setInterval(function(){f.style.opacity=((Date.now()-b)*(1-g)/c);if(f.style.opacity>=1){f.style.opacity=1;clearInterval(e)}},4)}})};bacon.html.fadeOut=function(c,a){if(typeof c!=="number"){a=c;c=bacon._defaultAnimTime}var b=Date.now(),d=this;if(typeof a==="function"){setTimeout(function(){a.call(d)},c+4)}return this.each(function(){var e,g=(this.style.opacity||1),f=this;if(this.style.opacity!=="0"){e=setInterval(function(){f.style.opacity=1-((Date.now()-b)*g/c);if(f.style.opacity<=0){f.style.opacity=0;clearInterval(e)}},4)}})};
